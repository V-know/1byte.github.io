<!DOCTYPE html>
<html lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no">
<meta name="author" content="Gavin Wei">



<meta name="description" content="Grafana 是 Graphite仪表盘和图形编辑器。Grafana 是开源的、功能齐全的度量仪表盘和图形编辑器，支持 Graphite，InfluxDB 和 OpenTSDB。 Grafana 主要特性：  灵活丰富的图形化选项； 可以混合多种风格； 支持白天和夜间模式； 多个数据源； Graphite 和 InfluxDB 查询编辑器等等。">
<meta name="keywords" content="Monitoring,graphite,grafana,ubuntu">
<meta property="og:type" content="article">
<meta property="og:title" content="Deploy Graphite with Grafana on Ubuntu 14.04 (Part Ⅱ)">
<meta property="og:url" content="http://1byte.pro/monitoring/grafana.html">
<meta property="og:site_name" content="Just 1 Byte">
<meta property="og:description" content="Grafana 是 Graphite仪表盘和图形编辑器。Grafana 是开源的、功能齐全的度量仪表盘和图形编辑器，支持 Graphite，InfluxDB 和 OpenTSDB。 Grafana 主要特性：  灵活丰富的图形化选项； 可以混合多种风格； 支持白天和夜间模式； 多个数据源； Graphite 和 InfluxDB 查询编辑器等等。">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://www.linode.com/docs/assets/graphite_grafana_data_source.png">
<meta property="og:image" content="https://www.linode.com/docs/assets/graphite_grafana_new_dashboard.png">
<meta property="og:image" content="https://www.linode.com/docs/assets/graphite_grafana_new_graph.png">
<meta property="og:image" content="https://www.linode.com/docs/assets/graphite_grafana_edit_graph.png">
<meta property="og:image" content="https://www.linode.com/docs/assets/graphite_grafana_edit_graph_add_metric.png">
<meta property="og:updated_time" content="2018-08-28T09:41:44.161Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Deploy Graphite with Grafana on Ubuntu 14.04 (Part Ⅱ)">
<meta name="twitter:description" content="Grafana 是 Graphite仪表盘和图形编辑器。Grafana 是开源的、功能齐全的度量仪表盘和图形编辑器，支持 Graphite，InfluxDB 和 OpenTSDB。 Grafana 主要特性：  灵活丰富的图形化选项； 可以混合多种风格； 支持白天和夜间模式； 多个数据源； Graphite 和 InfluxDB 查询编辑器等等。">
<meta name="twitter:image" content="https://www.linode.com/docs/assets/graphite_grafana_data_source.png">

<link rel="apple-touch-icon" href="/apple-touch-icon.png">




    <link rel="shortcut icon" href="/img/favicon.ico">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-big-counter.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">



<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>Deploy Graphite with Grafana on Ubuntu 14.04 (Part Ⅱ) | Just 1 Byte</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: false,
        isPost: true,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: true
    }
</script>


    <script>
        yiliaConfig.jquery_ui = [true, "//cdn.bootcss.com/jqueryui/1.10.4/jquery-ui.min.js", "//cdn.bootcss.com/jqueryui/1.10.4/css/jquery-ui.min.css"];
    </script>



    <script> yiliaConfig.rootUrl = "\/";</script>



    <script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5b6bfb7348dc08eb"></script>




</head></html>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/head.jpg" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">Gavin Wei</a></h1>
        </hgroup>

        
        <p class="header-subtitle">○|||||||○</p>
        

        
            <form id="search-form">
            <input type="text" id="local-search-input" name="q" placeholder="search..." class="search form-control" autocomplete="off" autocorrect="off" searchonload="false">
            <i class="fa fa-times" onclick="resetSearch()"></i>
            </form>
            <div id="local-search-result"></div>
            <p class="no-result">No results found <i class="fa fa-spinner fa-pulse"></i></p>
        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">博客首页</a></li>
                        
                            <li><a href="/about">九评博主</a></li>
                        
                            <li><a href="/archives">文章归档</a></li>
                        
                            <li><a href="/influxdb">InfluxDB</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa 简书" href="http://www.jianshu.com/users/7a890139a00e/latest_articles" title="简书"></a>
                            
                                <a class="fa Twitter" href="http://twitter.com/mrunamed" title="Twitter"></a>
                            
                                <a class="fa Quora" href="https://www.quora.com/profile/Gavin-Hill-5" title="Quora"></a>
                            
                                <a class="fa CSDN" href="mailto:none@canstop.me" title="CSDN"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ansible/">Ansible</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bash/">Bash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bigdata/">BigData</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/celery/">Celery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/chromium/">Chromium</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dind/">DIND</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/">Docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/exception/">Exception</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/flask/">Flask</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/flume/">Flume</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/freeipa/">FreeIPA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gitlab/">Gitlab</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hadoop/">Hadoop</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hbase/">Hbase</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/issue/">Issue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jenkins/">Jenkins</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jira/">Jira</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kafka/">Kafka</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/monitor/">Monitor</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/monitoring/">Monitoring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/playbook/">Playbook</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/prometheus/">Prometheus</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/robustness/">Robustness</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sqlalchemy/">SQLAlchemy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/scala/">Scala</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/selenium/">Selenium</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shame/">Shame</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spark/">Spark</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sqlalhemy/">SqlAlhemy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/troubleshooting/">Troubleshooting</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/v/">V</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/collectd/">collectd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/container/">container</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fabfile/">fabfile</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fabric/">fabric</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grafana/">grafana</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/graphite/">graphite</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/image/">image</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jira/">jira</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lorote/">lorote</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/percona/">percona</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/seyren/">seyren</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ss5/">ss5</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ubuntu/">ubuntu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zookeeper/">zookeeper</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/工作笔记/">工作笔记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/性能优化/">性能优化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/日志切割/">日志切割</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/红芯浏览器/">红芯浏览器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/集群/">集群</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/雕虫小技/">雕虫小技</a></li></ul>
                    </div>
                </section>
                
                
                

                
                
                <section class="switch-part switch-part3">
                
                    <div id="js-aboutme">爱单车、爱Linux、学摄影 《Ansible权威指南》作者</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">Gavin Wei</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/head.jpg" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">Gavin Wei</a></h1>
            </hgroup>
            
            <p class="header-subtitle">○|||||||○</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">博客首页</a></li>
                
                    <li><a href="/about">九评博主</a></li>
                
                    <li><a href="/archives">文章归档</a></li>
                
                    <li><a href="/influxdb">InfluxDB</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa 简书" target="_blank" href="http://www.jianshu.com/users/7a890139a00e/latest_articles" title="简书"></a>
                            
                                <a class="fa Twitter" target="_blank" href="http://twitter.com/mrunamed" title="Twitter"></a>
                            
                                <a class="fa Quora" target="_blank" href="https://www.quora.com/profile/Gavin-Hill-5" title="Quora"></a>
                            
                                <a class="fa CSDN" target="_blank" href="mailto:none@canstop.me" title="CSDN"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我">
</nav>
      <div class="body-wrap"><article id="post-grafana" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/monitoring/grafana.html" class="article-date">
      <time datetime="2016-09-15T11:46:36.000Z" itemprop="datePublished">2016-09-15</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Deploy Graphite with Grafana on Ubuntu 14.04 (Part Ⅱ)
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/monitoring/">Monitoring</a>
    </div>


        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/monitoring/">Monitoring</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/grafana/">grafana</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/graphite/">graphite</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ubuntu/">ubuntu</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>Grafana 是 <a href="https://1byte.pro/monitoring/graphite.html">Graphite</a>仪表盘和图形编辑器。Grafana 是开源的、功能齐全的度量仪表盘和图形编辑器，支持 Graphite，InfluxDB 和 OpenTSDB。</p>
<p>Grafana 主要特性：</p>
<ul>
<li>灵活丰富的图形化选项；</li>
<li>可以混合多种风格；</li>
<li>支持白天和夜间模式；</li>
<li>多个数据源；</li>
<li>Graphite 和 InfluxDB 查询编辑器等等。<a id="more"></a>
<h2 id="Install-and-Configure-Grafana"><a href="#Install-and-Configure-Grafana" class="headerlink" title="Install and Configure Grafana"></a>Install and Configure Grafana</h2><strong>1.</strong> Add Grafana’s repository to sources.list:<br>添加安装Grafana所需的源<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> 'deb https:<span class="string">//packagecloud.io/grafana/stable/debian/</span> wheezy main' |  sudo tee -a <span class="string">/etc/apt/sources.list</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>2.</strong> Add the <a href="https://packagecloud.io/grafana" target="_blank" rel="noopener">Package Cloud</a> key to install signed packages:<br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl https://packagecloud.io/gpg.key | sudo apt-key <span class="keyword">add</span><span class="bash"> -</span></span><br></pre></td></tr></table></figure></p>
<p><strong>3.</strong> Update apt and install Grafana:<br>更新源，通过apt-get安装Grafana<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-<span class="builtin-name">get</span> update &amp;&amp; sudo apt-<span class="builtin-name">get</span> install grafana</span><br></pre></td></tr></table></figure></p>
<p><strong>4.</strong> Configure Grafana to use the PostgreSQL database created earlier:<br>配置Grafana使用之前创建的PostgreSQL数据库<br><em>File excerpt:</em> <strong>/etc/grafana/grafana.ini</strong><br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[database]</span><br><span class="line"><span class="comment"># Either "mysql", "postgres" or "sqlite3", it's your choice</span></span><br><span class="line">type = postgres</span><br><span class="line">host = 127.0.0.1:5432</span><br><span class="line">name = grafana</span><br><span class="line">user = graphite</span><br><span class="line">password = graphiteuserpassword</span><br></pre></td></tr></table></figure></p>
<p><strong>5.</strong> Also in <code>/etc/grafana/grafana.ini</code>, configure the <code>domain</code> and <code>root_url</code>, and set a strong admin password and secret key:<br>配置WEB端口及帐号密码：<br><em>File excerpt:</em> **/etc/grafana/grafana.ini<br><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[server]</span></span><br><span class="line"><span class="attr">protocol</span> = http</span><br><span class="line"><span class="attr">http_addr</span> = <span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line"><span class="attr">http_port</span> = <span class="number">3000</span></span><br><span class="line"><span class="attr">domain</span> = example.com</span><br><span class="line"><span class="attr">enforce_domain</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">root_url</span> = %(protocol)s://%(domain)s/</span><br><span class="line"></span><br><span class="line"><span class="section">[security]</span></span><br><span class="line"><span class="attr">admin_user</span> = admin</span><br><span class="line"><span class="attr">admin_password</span> = SecureAdminPass</span><br><span class="line"><span class="attr">secret_key</span> = somelongrandomstringkey</span><br></pre></td></tr></table></figure></p>
<p><strong>6.</strong> Enable proxy modules for Apache reverse proxying to work:<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo a2enmod<span class="built_in"> proxy </span>proxy_http xml2enc</span><br></pre></td></tr></table></figure></p>
<p><strong>7.</strong> Create an Apache site configuration file to proxy requests to Grafana. Remember to change <code>example.com</code> to your own domain:<br>通过Apache 使用80端口对Grafana进行访问<br><em>File excerpt:</em> <strong>/etc/apache2/sites-available/apache2-grafana.conf</strong><br><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">&lt;VirtualHost *:80&gt;</span></span><br><span class="line">    <span class="attribute">ProxyPreserveHost</span> <span class="literal">On</span></span><br><span class="line">    <span class="attribute">ProxyPass</span> / http://127.0.0.1:3000/</span><br><span class="line">    <span class="attribute">ProxyPassReverse</span> / http://127.0.0.1:3000/</span><br><span class="line">    <span class="attribute"><span class="nomarkup">ServerName</span></span> example.com</span><br><span class="line"><span class="section">&lt;/VirtualHost&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><strong>8.</strong> Enable Grafana’s site configuration with:<br>启用Grafana的Apache配置：<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sudo</span> a2ensite apache2-grafana</span><br></pre></td></tr></table></figure></p>
<p><strong>9.</strong> Configure Grafana to run after boot and then start service:<br>设置Grafana开机启动：<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo update-rc.d grafana-server defaults 95 10</span><br><span class="line">sudo<span class="built_in"> service </span>grafana-server start</span><br></pre></td></tr></table></figure></p>
<p>Restart Apache to load the new modules and configuration changes:<br>重启Apache，以应用最新配置：<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo<span class="built_in"> service </span>apache2 restart</span><br></pre></td></tr></table></figure></p>
<p>At this point, you should be able to open your Linode’s domain or IP address in a browser to see Grafana’s login page.<br>至些，可以从浏览中通过访问主机80端口来访问Grafana界面。</p>
<h2 id="Add-a-Graphite-Data-Source-to-Grafana"><a href="#Add-a-Graphite-Data-Source-to-Grafana" class="headerlink" title="Add a Graphite Data Source to Grafana"></a>Add a Graphite Data Source to Grafana</h2><p>为Grafa添加数据源，即连接Graphite<br><strong>1.</strong> Log in into Grafana using the <code>admin</code> credentials you specified in <code>grafana.ini</code> above.<br>使用前面设置的帐号密码来登录Grafana，默认帐号密码是：admin/admin<br><strong>2.</strong> Click on <code>Data Sources</code> and select <code>Add new</code>. Fill in all the fields as shown in the screenshot below:<br><img src="https://www.linode.com/docs/assets/graphite_grafana_data_source.png" alt="Add Data Source dialog"></p>
<p>Click <strong>Save</strong> to create the new Data Source.<br><strong>3.</strong> Now, before creating a graph, add more test data for the test.count metric by again running:<br>在添加新的监控图表之前，生成一份新测试数据：<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for i in <span class="number">4</span> <span class="number">6</span> <span class="number">8</span> <span class="number">16</span> <span class="number">2</span>; do echo <span class="string">"test.count $i `date +%s`"</span> | nc -q0 <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> <span class="number">2003</span>; sleep <span class="number">6</span>; done</span><br></pre></td></tr></table></figure></p>
<p><strong>4.</strong> Create a new dashboard by clicking the <strong>Home</strong> button and then <strong>+ New</strong>:<br>添加一个Dashboard:<br><img src="https://www.linode.com/docs/assets/graphite_grafana_new_dashboard.png" alt="Create new dashboard"></p>
<p><strong>5.</strong> Add a Graph panel to the newly created dashboard:<br>在新创建的dashboard中添加新图：<br><img src="https://www.linode.com/docs/assets/graphite_grafana_new_graph.png" alt="Create new graph panel"></p>
<p><strong>6.</strong> Edit the Graph panel properties by clicking the tab with the words <strong>no title (click here)</strong>. Then click <strong>Edit</strong>:<br>向图中添加数据<br><img src="https://www.linode.com/docs/assets/graphite_grafana_edit_graph.png" alt="Edit graph panel"></p>
<p><strong>7.</strong> Make sure the <strong>graphite</strong> data source you’ve created is chosen in the dropdown box at the bottom right (marked as 1 in the screenshot below). In the dropdown at the top right corner (marked as 2), choose <strong>Last 15 minutes</strong>.<br>Click <strong>select metric</strong>. Choose <strong>test</strong> and then <strong>count</strong> (marked as 3) to add the test metric you previously created. At this point, the sample data should appear on the graph.<br>Finally, click the <strong>Save</strong> button (marked as 4) to save the dashboard you just created.<br>选择需要监控的数据源。<br>一图胜千言。<br><img src="https://www.linode.com/docs/assets/graphite_grafana_edit_graph_add_metric.png" alt="Add test metric to the panel"></p>
<p>Grafana图片界面展示：<a href="http://play.grafana-zabbix.org/dashboard/db/grafana-zabbix-demo" target="_blank" rel="noopener">http://play.grafana-zabbix.org/dashboard/db/grafana-zabbix-demo</a></p>
<p>The pure English Version: <a href="https://www.linode.com/docs/uptime/monitoring/deploy-graphite-with-grafana-on-ubuntu-14-04" target="_blank" rel="noopener">https://www.linode.com/docs/uptime/monitoring/deploy-graphite-with-grafana-on-ubuntu-14-04</a></p>
<h2 id="More-Information"><a href="#More-Information" class="headerlink" title="More Information"></a>More Information</h2><p>You may wish to consult the following resources for additional information on this topic. While these are provided in the hope that they will be useful, please note that we cannot vouch for the accuracy or timeliness of externally hosted materials.<br>下面是一引起扩展资料，有兴趣的可以做为扩展阅读。</p>
<ul>
<li><a href="http://graphite.readthedocs.org/en/latest/install.html" target="_blank" rel="noopener">Installing Graphite</a></li>
<li><a href="http://graphite.readthedocs.org/en/latest/config-carbon.html" target="_blank" rel="noopener">Configuring Carbon</a></li>
<li><a href="http://docs.grafana.org/installation/debian/" target="_blank" rel="noopener">Installing Grafana on Debian/Ubuntu</a></li>
<li><a href="http://docs.grafana.org/datasources/graphite/" target="_blank" rel="noopener">Adding Graphite data source to Grafana</a></li>
</ul>

      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>本文标题:</span><a href="/monitoring/grafana.html">Deploy Graphite with Grafana on Ubuntu 14.04 (Part Ⅱ)</a></p>
        <p><span>文章作者:</span><a href="/" title="回到主页">Gavin Wei</a></p>
        <p><span>发布时间:</span>2016-09-15, 11:46:36</p>
        <p><span>最后更新:</span>2018-08-28, 09:41:44</p>
        <p>
            <span>原始链接:</span><a class="post-url" href="/monitoring/grafana.html" title="Deploy Graphite with Grafana on Ubuntu 14.04 (Part Ⅱ)">http://1byte.pro/monitoring/grafana.html</a>
            <span class="copy-path" data-clipboard-text="原文: http://1byte.pro/monitoring/grafana.html　　作者: Gavin Wei" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target="_blank">"署名-非商用-相同方式共享 4.0"</a> 转载请保留原文链接及作者。
        </p>
    </div>



    <nav id="article-nav">
        
            <div id="article-nav-newer" class="article-nav-title">
                <a href="/monitoring/seyren.html">
                    Deploy Seyren with Grafana on Ubuntu 14.04
                </a>
            </div>
        
        
            <div id="article-nav-older" class="article-nav-title">
                <a href="/monitoring/graphite.html">
                    Deploy Graphite with Grafana on Ubuntu 14.04(Part Ⅰ)
                </a>
            </div>
        
    </nav>

  
</article>

    <div id="toc" class="toc-article">
        <strong class="toc-title">文章目录</strong>
        
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Install-and-Configure-Grafana"><span class="toc-number">1.</span> <span class="toc-text">Install and Configure Grafana</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Add-a-Graphite-Data-Source-to-Grafana"><span class="toc-number">2.</span> <span class="toc-text">Add a Graphite Data Source to Grafana</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#More-Information"><span class="toc-number">3.</span> <span class="toc-text">More Information</span></a></li></ol>
        
    </div>
    <style>
        .left-col .switch-btn,
        .left-col .switch-area {
            display: none;
        }
        .toc-level-3 i,
        .toc-level-3 ol {
            display: none !important;
        }
    </style>

    <input type="button" id="tocButton" value="隐藏目录" title="点击按钮隐藏或者显示文章目录">

    <script>
        yiliaConfig.toc = ["隐藏目录", "显示目录", !!"false"];
    </script>



    
<div class="share">
    

    
        <div class="addthis_sharing_toolbox"></div>
    
</div>







    
        <section id="comments">
    <style> aside.comment-bar { margin: auto 30px; }</style>
    <div id="disqus_thread"></div>
    <script>
        var disqus_config = function(){
            this.page.url = 'http://1byte.pro/monitoring/grafana.html';
            this.page.identifier = 'monitoring/grafana.html';
        };
        var loadComment = function(){
            var d = document, s = d.createElement('script');
            s.src = '//cancellara.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        }
    </script>
    
    <aside class="comment-bar">
        <a href="javascript:void(0);">
            <i class="fa fa-commenting-o animated infinite pulse"></i>
            <i class="fa fa-spinner fa-pulse"></i>
            <span class="count-comment"></span>
        </a>
    </aside>
    <script>
        var $commentBar = $("#comments aside.comment-bar");
        var load$hide = function(){
            $commentBar.find("a > i").toggle();
            loadComment();
            $commentBar.fadeOut(800);
        }
        $commentBar.click(function(){
            load$hide();
        })
        $commentBar.children("a").hover(function(){
            load$hide();
        })
        if (window.location.hash === "#comments") {
            load$hide();
        }
    </script>

</section>


    <script id="dsq-count-scr" src="//cancellara.disqus.com/count.js" async></script>
    <span class="disqus-comment-count" data-disqus-identifier="monitoring/grafana.html"></span>
    <span class="disqus-comment-count" data-disqus-url="http://1byte.pro/monitoring/grafana.html"></span>
    <script>
        $(".disqus-comment-count").hide();
        var $disqusCount = $(".disqus-comment-count");
        $disqusCount.bind("DOMNodeInserted", function(e) {
            $(".count-comment").text(
                $(this).text().replace(/[^0-9]/ig,"")
            )
            DISQUSWIDGETS.getCount({reset: true});
        })
    </script>


    




    <div class="scroll" id="post-nav-button">
        
            <a href="/monitoring/seyren.html" title="上一篇: Deploy Seyren with Grafana on Ubuntu 14.04">
                <i class="fa fa-angle-left"></i>
            </a>
        

        <a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>

        
            <a href="/monitoring/graphite.html" title="下一篇: Deploy Graphite with Grafana on Ubuntu 14.04(Part Ⅰ)">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>

    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/python/ansible-sysctl.html">Ansible sysctl模块去重BUG</a></li><li class="post-list-item"><a class="post-list-link" href="/python/get-default-time-for-flask-sqlalchemy.html">Flask sqlalchemy 设置默认时间</a></li><li class="post-list-item"><a class="post-list-link" href="/python/celery-sqlalchemy-issue.html">Celery SQLAlchemy issue</a></li><li class="post-list-item"><a class="post-list-link" href="/python/flask-request.html">Flask request小结</a></li><li class="post-list-item"><a class="post-list-link" href="/python/celery-exc-type-error.html">Celery任务状态报错一例</a></li><li class="post-list-item"><a class="post-list-link" href="/bigdata/hbase-rowkey-rules.html">Hbase Rowkey设计规范参考</a></li><li class="post-list-item"><a class="post-list-link" href="/bigdata/zookeeper-election-rules.html">Zookeeper选举机制</a></li><li class="post-list-item"><a class="post-list-link" href="/devops/deploy-node-exporter-by-ansible.html">利用Ansible Playbook批量部署node_exporter</a></li><li class="post-list-item"><a class="post-list-link" href="/bigdata/foreach-forearchpartition.html">Spark性能优化之foreach与foreachPartition</a></li><li class="post-list-item"><a class="post-list-link" href="/devops/kafka-flume.html">Kafka与Flume区别</a></li><li class="post-list-item"><a class="post-list-link" href="/coding/scala-exception-handler.html">Scala异常获取一例</a></li><li class="post-list-item"><a class="post-list-link" href="/opinions/fake-chrome.html">红芯浏览器下载</a></li><li class="post-list-item"><a class="post-list-link" href="/issues/gitlab-trouble-shooting.html">Gitlab问题小结</a></li><li class="post-list-item"><a class="post-list-link" href="/python/chromium-on-centos-for-selenium.html">无GUI的CentOS上使用Selenium+Chrome</a></li><li class="post-list-item"><a class="post-list-link" href="/voice/v.html">V</a></li><li class="post-list-item"><a class="post-list-link" href="/bigdata/hadoop-banlancer.html">Hadoop集群中banlancer用法简介</a></li><li class="post-list-item"><a class="post-list-link" href="/issues/jira-over-https.html">Nginx开启HTTPS反向代理访问Jira失败</a></li><li class="post-list-item"><a class="post-list-link" href="/devops/install-freeipa-client.html">FreeIPA Client 端部署</a></li><li class="post-list-item"><a class="post-list-link" href="/devops/install-freeipa-server-on-centos.html">FreeIPA Server 端部署</a></li><li class="post-list-item"><a class="post-list-link" href="/devops/RobustnessOfShellScript.html">如何写出健壮的 Bash 脚本</a></li><li class="post-list-item"><a class="post-list-link" href="/devops/ansible-basics-playbook.html">Ansible基础-Playbook入门</a></li><li class="post-list-item"><a class="post-list-link" href="/monitoring/collectd.html">collectd</a></li><li class="post-list-item"><a class="post-list-link" href="/monitoring/seyren.html">Deploy Seyren with Grafana on Ubuntu 14.04</a></li><li class="post-list-item"><a class="post-list-link" href="/monitoring/grafana.html">Deploy Graphite with Grafana on Ubuntu 14.04 (Part Ⅱ)</a></li><li class="post-list-item"><a class="post-list-link" href="/monitoring/graphite.html">Deploy Graphite with Grafana on Ubuntu 14.04(Part Ⅰ)</a></li><li class="post-list-item"><a class="post-list-link" href="/python/date-of-python.html">Python日期自然月加减实操</a></li><li class="post-list-item"><a class="post-list-link" href="/jenkins/jenkins.html">Jenkins Operation</a></li><li class="post-list-item"><a class="post-list-link" href="/docker/install-jira-manully.html">Jira Manully Install</a></li><li class="post-list-item"><a class="post-list-link" href="/docker/add-logrotate-to-percona-container.html">percona容器添加logrotate功能</a></li><li class="post-list-item"><a class="post-list-link" href="/docker/compile-image.html">Percona容器部署</a></li><li class="post-list-item"><a class="post-list-link" href="/docker/ss5.html">SS5 Installation</a></li><li class="post-list-item"><a class="post-list-link" href="/docker/docker-deployment.html">Docker deployment</a></li><li class="post-list-item"><a class="post-list-link" href="/docker/fabfile.html">vpnporxy 部署纪要</a></li></ul>




    <script>
        
    </script>

</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016-2020 Gavin Wei
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a>
            </div>
        </div>
        
            <div class="visit">
                
                
                
            </div>
        
    </div>
</footer>

    </div>
    
    <script src="/js/GithubRepoWidget.js"></script>

<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>



<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-123125086-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->



<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
             github: ".github-widget a", 
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>