<!DOCTYPE html>
<html lang="zh-Hans">
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="Gavin Wei" />


    
     
        <meta name="google-site-verification" content="cthMnz-WzB_auyScm9HT7JKyxkjEd7NhTGMBIhStcaM" />
    


<meta property="og:type" content="website">
<meta property="og:title" content="Just 1 Byte">
<meta property="og:url" content="http://1byte.pro/index.html">
<meta property="og:site_name" content="Just 1 Byte">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Just 1 Byte">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">




    <link rel="shortcut icon" href="/img/favicon.ico">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-big-counter.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">


    <style> .article { opacity: 0;} </style>


<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>Just 1 Byte</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: true,
        isPost: false,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: true
    }
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/head.jpg" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">Gavin Wei</a></h1>
        </hgroup>

        
        <p class="header-subtitle">会骑车的Devops</p>
        

        
            <form id="search-form">
            <input type="text" id="local-search-input" name="q" placeholder="search..." class="search form-control" autocomplete="off" autocorrect="off" searchonload="false" />
            <i class="fa fa-times" onclick="resetSearch()"></i>
            </form>
            <div id="local-search-result"></div>
            <p class='no-result'>No results found <i class='fa fa-spinner fa-pulse'></i></p>
        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">博客首页</a></li>
                        
                            <li><a href="/about/">九评博主</a></li>
                        
                            <li><a href="/archives/">文章归档</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Coding" href="https://github.com/v-know" title="Coding"></a>
                            
                                <a class="fa 知乎" href="https://www.zhihu.com/people/unamed-mr" title="知乎"></a>
                            
                                <a class="fa 新浪微博" href="http://weibo.com/178go" title="新浪微博"></a>
                            
                                <a class="fa Twitter" href="http://twitter.com/mrunamed" title="Twitter"></a>
                            
                                <a class="fa 简书" href="http://www.jianshu.com/users/7a890139a00e/latest_articles" title="简书"></a>
                            
                                <a class="fa Quora" href="https://www.quora.com/profile/Gavin-Hill-5" title="Quora"></a>
                            
                                <a class="fa CSDN" href="mailto:none@canstop.me" title="CSDN"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Chromium/">Chromium</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DIND/">DIND</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Selenium/">Selenium</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/V/">V</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/collectd/">collectd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/container/">container</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fabfile/">fabfile</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fabric/">fabric</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grafana/">grafana</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/graphite/">graphite</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/image/">image</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jenkins/">jenkins</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jira/">jira</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lorote/">lorote</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/monitoring/">monitoring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/percona/">percona</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/seyren/">seyren</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ss5/">ss5</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ubuntu/">ubuntu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/工作笔记/">工作笔记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/日志切割/">日志切割</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/雕虫小技/">雕虫小技</a></li></ul>
                    </div>
                </section>
                
                
                

                
                
                <section class="switch-part switch-part3">
                
                    <div id="js-aboutme">爱单车、爱Linux、会做饭、学摄影</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">Gavin Wei</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/head.jpg" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">Gavin Wei</a></h1>
            </hgroup>
            
            <p class="header-subtitle">会骑车的Devops</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">博客首页</a></li>
                
                    <li><a href="/about/">九评博主</a></li>
                
                    <li><a href="/archives/">文章归档</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Coding" target="_blank" href="https://github.com/v-know" title="Coding"></a>
                            
                                <a class="fa 知乎" target="_blank" href="https://www.zhihu.com/people/unamed-mr" title="知乎"></a>
                            
                                <a class="fa 新浪微博" target="_blank" href="http://weibo.com/178go" title="新浪微博"></a>
                            
                                <a class="fa Twitter" target="_blank" href="http://twitter.com/mrunamed" title="Twitter"></a>
                            
                                <a class="fa 简书" target="_blank" href="http://www.jianshu.com/users/7a890139a00e/latest_articles" title="简书"></a>
                            
                                <a class="fa Quora" target="_blank" href="https://www.quora.com/profile/Gavin-Hill-5" title="Quora"></a>
                            
                                <a class="fa CSDN" target="_blank" href="mailto:none@canstop.me" title="CSDN"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我"/>
</nav>
      <div class="body-wrap">
  
    <article id="post-chromium-on-centos-for-selenium" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/python/chromium-on-centos-for-selenium.html" class="article-date">
      <time datetime="2018-08-07T07:54:09.000Z" itemprop="datePublished">2018-08-07</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/python/chromium-on-centos-for-selenium.html">无GUI的CentOS上使用Selenium+Chrome</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <p>客户的网站上的监测代码最近连续两次在网站更新时被清除掉，导致无法正常获取网站访问数据，影响到后续大数据分析。</p>
<p>为解决这个问题，决定使用Python <code>Selenium</code>模块来实现网站按钮模拟点击，同时监测我们后台是否能正常收到，以此来判断网站按钮监测代码是否有正常部署。</p>
<p><code>Selenium</code>很好用很强大，开发和部署也都很简单，是自动化测试非常好的工具，但是问题是我们需要在无GUI的服务器上进行部署，这就牵涉到在无GUI的服务器上安装浏览器的问题，我这里选择的是Chrome。</p>
<hr>
<p>下面简单分享一个部署过程中遇到的坑，也当作是总结。<br>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/python/">python</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Chromium/">Chromium</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Selenium/">Selenium</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a href="/python/chromium-on-centos-for-selenium.html#more">阅读全文 >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-v" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/voice/v.html" class="article-date">
      <time datetime="2018-07-24T10:37:24.000Z" itemprop="datePublished">2018-07-24</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/voice/v.html">V</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <p>V’s speech is recognized by the analysts at Smith Change the World Incorporated as one of the most influential speeches of the near future.<br>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/voice/">voice</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/V/">V</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a href="/voice/v.html#more">阅读全文 >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-collectd" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/monitoring/collectd.html" class="article-date">
      <time datetime="2016-10-26T02:57:46.000Z" itemprop="datePublished">2016-10-26</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/monitoring/collectd.html">collectd</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>Collecting and visualizing data is an important way to make informed decisions about your servers and projects.</p>
<p>In a previous guide, we discussed how to install and configure Graphite to visualize data on our servers. However, we didn’t have a good way of collecting or even passing data into Graphite.</p>
<p>In this guide, we’ll discuss the installation and use of <code>collectd</code>, a system statistics gatherer that can collect and organize metrics about your server and running services.</p>
<p>We will show you how to install and configure collectd to pass data into Graphite to render. We will assume that you have Graphite up and running on an Ubuntu 14.04 server as we showed you in the last guide.<br>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/monitoring/">monitoring</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/collectd/">collectd</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/monitoring/">monitoring</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a href="/monitoring/collectd.html#more">阅读全文 >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-seyren" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/monitoring/seyren.html" class="article-date">
      <time datetime="2016-09-16T09:25:38.000Z" itemprop="datePublished">2016-09-16</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/monitoring/seyren.html">Deploy Seyren with Grafana on Ubuntu 14.04</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <p><img src="https://i.imgur.com/Ae5gQJZ.png" height="45" width="200"></p>
<p>Seyren (<a href="http://en.wikipedia.org/wiki/Wikipedia:IPA_for_English#Key" target="_blank" rel="noopener">/ˈsaɪ.rʌn/</a>) 是一款基于Graphite的报警平台，它支持下面这些报警通知方式：</p>
<ul>
<li><a href="http://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol" target="_blank" rel="noopener">Email</a>, <a href="https://www.flowdock.com" target="_blank" rel="noopener">Flowdock</a>, <a href="https://www.hipchat.com" target="_blank" rel="noopener">HipChat</a>, <a href="http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol" target="_blank" rel="noopener">HTTP</a>, <a href="http://hubot.github.com" target="_blank" rel="noopener">Hubot</a>, <a href="https://github.com/RJ/irccat" target="_blank" rel="noopener">IRCcat</a>, <a href="http://www.pagerduty.com" target="_blank" rel="noopener">PagerDuty</a>, <a href="https://pushover.net" target="_blank" rel="noopener">Pushover</a>, <a href="http://www.slf4j.org" target="_blank" rel="noopener">SLF4J</a>, <a href="https://www.slack.com" target="_blank" rel="noopener">Slack</a>, <a href="http://en.wikipedia.org/wiki/Simple_Network_Management_Protocol" target="_blank" rel="noopener">SNMP</a>, <a href="https://www.twilio.com/" target="_blank" rel="noopener">Twilio</a></li>
</ul>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/monitoring/">monitoring</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/grafana/">grafana</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/graphite/">graphite</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/monitoring/">monitoring</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/seyren/">seyren</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ubuntu/">ubuntu</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a href="/monitoring/seyren.html#more">阅读全文 >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-grafana" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/monitoring/grafana.html" class="article-date">
      <time datetime="2016-09-15T11:46:36.000Z" itemprop="datePublished">2016-09-15</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/monitoring/grafana.html">Deploy Graphite with Grafana on Ubuntu 14.04 (Part Ⅱ)</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <p>Grafana 是 <a href="http://www.54biker.com/monitoring/graphite.html" target="_blank" rel="noopener">Graphite</a>仪表盘和图形编辑器。Grafana 是开源的、功能齐全的度量仪表盘和图形编辑器，支持 Graphite，InfluxDB 和 OpenTSDB。</p>
<p>Grafana 主要特性：</p>
<ul>
<li>灵活丰富的图形化选项；</li>
<li>可以混合多种风格；</li>
<li>支持白天和夜间模式；</li>
<li>多个数据源；</li>
<li>Graphite 和 InfluxDB 查询编辑器等等。
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/monitoring/">monitoring</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/grafana/">grafana</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/graphite/">graphite</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/monitoring/">monitoring</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ubuntu/">ubuntu</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a href="/monitoring/grafana.html#more">阅读全文 >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-graphite" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/monitoring/graphite.html" class="article-date">
      <time datetime="2016-09-13T09:22:38.000Z" itemprop="datePublished">2016-09-13</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/monitoring/graphite.html">Deploy Graphite with Grafana on Ubuntu 14.04(Part Ⅰ)</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <p><a href="http://graphite.readthedocs.org/en/latest/index.html" target="_blank" rel="noopener">Graphite</a>是一款企业级的监控工具，其采用Django框架，可以运行在廉价的硬件资源之上。Graphite采用简单的文本协议和绘图功能可以方便地使用在任何操作系统上。本文将以Ubuntu 14.04为系统环境，就Graphite与<a href="http://graphite.readthedocs.org/en/latest/index.html" target="_blank" rel="noopener">Grafana</a>的安装与协作做详细介绍。</p>
<h2 id="Before-You-Begin-热身准备"><a href="#Before-You-Begin-热身准备" class="headerlink" title="Before You Begin / 热身准备"></a>Before You Begin / 热身准备</h2><p><strong>1.</strong> Familiarize yourself with our Getting Started guide and complete the steps for setting your Linode’s hostname and timezone.<br>本文原文来自Linode官网，所以会看到Linode字样，不用理会，把它当成你的主机的就可以了<br>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/monitoring/">monitoring</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/grafana/">grafana</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/graphite/">graphite</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/monitoring/">monitoring</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ubuntu/">ubuntu</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a href="/monitoring/graphite.html#more">阅读全文 >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-date-of-python" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/python/date-of-python.html" class="article-date">
      <time datetime="2016-09-09T09:06:49.000Z" itemprop="datePublished">2016-09-09</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/python/date-of-python.html">Python日期自然月加减实操</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="这段代码用于对数据库中两个表中不同形式的时间字段进行月份变更操作，月份的变更以自然月形式形式进行。"><a href="#这段代码用于对数据库中两个表中不同形式的时间字段进行月份变更操作，月份的变更以自然月形式形式进行。" class="headerlink" title="这段代码用于对数据库中两个表中不同形式的时间字段进行月份变更操作，月份的变更以自然月形式形式进行。"></a>这段代码用于对数据库中两个表中不同形式的时间字段进行月份变更操作，月份的变更以自然月形式形式进行。</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># By Gavin</span></span><br><span class="line"><span class="comment"># Date: 20190909</span></span><br><span class="line"><span class="comment"># Decription: 实现日期的自然月相加减，比如8月31号加一个月是9月30，而不是9月31号或10月1号</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> MySQLdb</span><br><span class="line"><span class="keyword">import</span> math,datetime</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_add_month_interval</span><span class="params">(dt,inter)</span>:</span></span><br><span class="line">    m=dt.month+inter<span class="number">-1</span></span><br><span class="line">    y=dt.year</span><br><span class="line">    y=dt.year+int(m/<span class="number">12</span>)</span><br><span class="line">    m=m % <span class="number">12</span> +<span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> (y,m)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add_month_interval</span><span class="params">(dt,inter)</span>:</span></span><br><span class="line">    y,m=_add_month_interval(dt,inter)</span><br><span class="line">    y2,m2=_add_month_interval(dt,inter+<span class="number">1</span>)</span><br><span class="line">    maxD=( datetime.date(y2,m2,<span class="number">1</span>)-datetime.timedelta(days=<span class="number">1</span>) ).day</span><br><span class="line">    d= dt.day&lt;=maxD <span class="keyword">and</span> dt.day <span class="keyword">or</span> maxD</span><br><span class="line">    <span class="comment">#return datetime.date(y,m,d)</span></span><br><span class="line">    <span class="keyword">return</span>(y,m,d)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add_year_interval</span><span class="params">(dt,inter)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> add_month_interval(dt,inter*<span class="number">12</span>)</span><br><span class="line"><span class="comment"># 上面三个函数与业务无关，可直接嫁接使用</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># inter为需要变更的月数，需要加一个月就写1，减两个月就写-2</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">update_metric</span><span class="params">(inter)</span>:</span></span><br><span class="line">    conn=MySQLdb.connect(host=<span class="string">'localhost'</span>,user=<span class="string">'root'</span>,passwd=<span class="string">'root'</span>,db=<span class="string">'gavin'</span>,port=<span class="number">3306</span>)</span><br><span class="line">    cur=conn.cursor()</span><br><span class="line">    cur.execute(<span class="string">'select date from metric_impressions order by date desc'</span>) </span><br><span class="line">    <span class="comment">#此时获取到的结果为元组</span></span><br><span class="line">    results = cur.fetchall()</span><br><span class="line">    <span class="comment">#将元组转换为列表</span></span><br><span class="line">    result=list(results)</span><br><span class="line">    <span class="keyword">for</span> now_date <span class="keyword">in</span> result:</span><br><span class="line">        <span class="comment"># now_date[0]格式形如：2016-09-21 12:03:23</span></span><br><span class="line">        timeArray = time.strptime(str(now_date[<span class="number">0</span>]), <span class="string">"%Y-%m-%d %H:%M:%S"</span>)</span><br><span class="line">        <span class="comment"># time.strptime处理过的数据结构(元组)不能被重新赋值</span></span><br><span class="line">        <span class="comment"># 所以这里需要将其转化为列表</span></span><br><span class="line">        timeArray = list(timeArray)</span><br><span class="line">        dt = datetime.date(timeArray[<span class="number">0</span>],timeArray[<span class="number">1</span>],timeArray[<span class="number">2</span>])</span><br><span class="line">        timeArray[<span class="number">0</span>],timeArray[<span class="number">1</span>],timeArray[<span class="number">2</span>] = add_month_interval(dt,inter)</span><br><span class="line">        new_date = time.strftime(<span class="string">"%Y-%m-%d %H:%M:%S"</span>, timeArray)</span><br><span class="line">        <span class="keyword">print</span> <span class="string">"new_date:&#123;&#125;     now_date:&#123;&#125;"</span>.format(new_date, now_date[<span class="number">0</span>])</span><br><span class="line">        sql = <span class="string">'update metric_impressions_hour set date="&#123;&#125;" where date="&#123;&#125;"'</span>.format(new_date, now_date[<span class="number">0</span>])</span><br><span class="line">        cur.execute(sql)</span><br><span class="line">    conn.commit()</span><br><span class="line">    conn.close()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">update_compaign</span><span class="params">(inter)</span>:</span></span><br><span class="line">    conn=MySQLdb.connect(host=<span class="string">'localhost'</span>,user=<span class="string">'root'</span>,passwd=<span class="string">'root'</span>,db=<span class="string">'gavin'</span>,port=<span class="number">3306</span>)</span><br><span class="line">    cur=conn.cursor()</span><br><span class="line">    cur.execute(<span class="string">'select data_date from campaign order by data_date desc'</span>)</span><br><span class="line">    results = cur.fetchall()</span><br><span class="line">    result=list(results)</span><br><span class="line">    <span class="keyword">for</span> now_date <span class="keyword">in</span> result:</span><br><span class="line">        <span class="comment"># now_date[0]格式形如：20160921</span></span><br><span class="line">        timeArray = time.strptime(str(now_date[<span class="number">0</span>]), <span class="string">"%Y%m%d"</span>)</span><br><span class="line">        timeArray = list(timeArray)</span><br><span class="line">        dt = datetime.date(timeArray[<span class="number">0</span>],timeArray[<span class="number">1</span>],timeArray[<span class="number">2</span>])</span><br><span class="line">        timeArray[<span class="number">0</span>],timeArray[<span class="number">1</span>],timeArray[<span class="number">2</span>] = add_month_interval(dt,inter)</span><br><span class="line">        new_date = time.strftime(<span class="string">"%Y%m%d"</span>, timeArray)</span><br><span class="line">        <span class="keyword">print</span> <span class="string">"new_date:&#123;&#125;     now_date:&#123;&#125;"</span>.format(new_date, now_date[<span class="number">0</span>])</span><br><span class="line">        sql = <span class="string">'update campaign_stats set data_date="&#123;&#125;" where data_date="&#123;&#125;"'</span>.format(new_date, now_date[<span class="number">0</span>])</span><br><span class="line">        <span class="keyword">print</span> sql</span><br><span class="line">        cur.execute(sql)</span><br><span class="line">    conn.commit()</span><br><span class="line">    conn.close()</span><br><span class="line"></span><br><span class="line">update_compaign(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/python/">python</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/雕虫小技/">雕虫小技</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-jenkins" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/jenkins/jenkins.html" class="article-date">
      <time datetime="2016-09-08T07:24:33.000Z" itemprop="datePublished">2016-09-08</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/jenkins/jenkins.html">Jenkins Operation</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <h2 id="Add-DNS-record"><a href="#Add-DNS-record" class="headerlink" title="Add DNS record"></a>Add DNS record</h2><p>Firstly, we need ceate a host(DNS recore) for our container vpnproxy</p>
<p>Login <a href="https://ipa-ja-1.example.com" target="_blank" rel="noopener">https://ipa-ja-1.example.com</a><br>add a host as the following picture shows:<br>Identity –&gt; Hosts –&gt; Add :<br><img src="/images/Jenkins/add-host.jpg" alt="Alt text"></p>
<p>By now, we’ve created a DNS recore, map vpnproxy1.shadc.example.com to IP 10.129.1.119</p>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/jenkins/">jenkins</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jenkins/">jenkins</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/工作笔记/">工作笔记</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a href="/jenkins/jenkins.html#more">阅读全文 >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-install-jira-manully" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/docker/install-jira-manully.html" class="article-date">
      <time datetime="2016-09-08T06:04:13.000Z" itemprop="datePublished">2016-09-08</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/docker/install-jira-manully.html">Jira Manully Install</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <h3 id="Launch-Jira-container"><a href="#Launch-Jira-container" class="headerlink" title="Launch Jira container"></a>Launch Jira container</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name jira1 -p 8181:8181 -it --entrypoint bash docker.example.com/jira:0.0.1-SNAPSHOT</span><br></pre></td></tr></table></figure>
<h3 id="Install-MySQL"><a href="#Install-MySQL" class="headerlink" title="Install MySQL"></a>Install MySQL</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir /var/lib/mysql</span><br><span class="line">installMysql.sh</span><br></pre></td></tr></table></figure>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/docker/">docker</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/docker/">docker</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jira/">jira</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a href="/docker/install-jira-manully.html#more">阅读全文 >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-add-logrotate-to-percona-container" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/docker/add-logrotate-to-percona-container.html" class="article-date">
      <time datetime="2016-09-08T02:37:18.000Z" itemprop="datePublished">2016-09-08</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/docker/add-logrotate-to-percona-container.html">percona容器添加logrotate功能</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <h1 id="添加logRotate"><a href="#添加logRotate" class="headerlink" title="添加logRotate"></a>添加logRotate</h1><h3 id="拉包"><a href="#拉包" class="headerlink" title="拉包"></a>拉包</h3><p><code>git clone ssh://gavinwei@git.example.com:29418/docker/base</code></p>
<h3 id="修改脚本"><a href="#修改脚本" class="headerlink" title="修改脚本"></a>修改脚本</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/base/ubuntu-py/src/main/docker</span><br><span class="line">cat logRotate.py</span><br></pre></td></tr></table></figure>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/docker/">docker</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/container/">container</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/docker/">docker</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/lorote/">lorote</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/percona/">percona</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/工作笔记/">工作笔记</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/日志切割/">日志切割</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a href="/docker/add-logrotate-to-percona-container.html#more">阅读全文 >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016-2018 Gavin Wei
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit"  title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
    <script src="/js/GithubRepoWidget.js"></script>

<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 8;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>



<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-123125086-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->



<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
             github: ".github-widget a", 
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

    <script>
        var originTitle = document.title;
        var titleTime;
        document.addEventListener("visibilitychange", function() {
            if (document.hidden) {
                document.title = "(つェ⊂) 我藏好了哦~ " + originTitle;
                clearTimeout(titleTime);
            }
            else {
                document.title = "(*´∇｀*) 被你发现啦~ " + originTitle;
                titleTime = setTimeout(function() {
                    document.title = originTitle;
                }, 2000);
            }
        })
    </script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>